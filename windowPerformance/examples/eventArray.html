<!doctype html>
<html>

<head>

<title>performance.timing: print events array</title>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script type="text/javascript">
function showPerformance() {
	var events = []; // navigation or load events
	var notApplicable = []; // navigation or load events with zero time
	// for each attribute in performance.timing
	// create an object and add it to the events array
	var minTime = Number.MAX_VALUE;
	var maxTime = Number.MIN_VALUE;
	Object.keys(performance.timing).forEach(function(key){	
		var time = parseInt(performance.timing[key]);
		if (time === 0) {
			notApplicable.push(key);
		} else {
			var event = {};
			event["attribute"] = key;
			if (time > maxTime) {
				maxTime = time;
			}
			if (time < minTime) {
				minTime = time;
			}
			event["time"] = time;
			events.push(event);
		}
	})	
	
	// subtract minTime from each event time
	// so that the earliest event time is 0
	events.forEach(function(event){
		event.time -= minTime;
	});

	// sort the events array by time
	events.sort(function(a, b){return a.time - b.time});
	var arrayToPrint = [];
	events.forEach(function(event){
			arrayToPrint.push(event.time + ": " + event.attribute);
	});
	document.body.innerHTML += arrayToPrint.join("<br />") + "<br />";
	document.body.innerHTML += "Total elapsed: " + (maxTime - minTime) + "<br />";
	document.body.innerHTML += "Not applicable: " + notApplicable.join(", ");
	
}


</script>

</head>

<body onload="setTimeout(showPerformance);">

<div>
	<a href="http://en.wikipedia.org/wiki/File:Uluru_(Helicopter_view)-crop.jpg" title="Uluru, helicopter view image from Wikipedia"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/f/fc/Uluru_%28Helicopter_view%29-crop.jpg/800px-Uluru_%28Helicopter_view%29-crop.jpg" title="Uluru, helicopter view image from Wikipedia"></a>
</div>

</body>

</html>